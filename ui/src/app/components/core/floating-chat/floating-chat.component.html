<div 
  class="floating-chat-container"
  [ngClass]="{
    'minimized': isMinimized,
    'expanded': isExpanded
  }"
>
  <!-- Chat Header -->
  <div class="chat-header">
    <div class="header-content">
      <div class="header-title">
        <ng-icon name="heroSparklesSolid" class="text-primary-500"></ng-icon>
        <span>AI Assistant</span>
      </div>
      <div class="header-actions">
        <button 
          class="action-button"
          (click)="toggleExpand()"
          matTooltip="{{ isExpanded ? 'Collapse' : 'Expand' }}"
        >
          <ng-icon 
            [name]="isExpanded ? 'heroArrowsPointingIn' : 'heroArrowsPointingOut'"
          ></ng-icon>
        </button>
        <button 
          class="action-button"
          (click)="toggleMinimize()"
          matTooltip="{{ isMinimized ? 'Maximize' : 'Minimize' }}"
        >
          <ng-icon 
            [name]="isMinimized ? 'heroChevronUp' : 'heroChevronDown'"
          ></ng-icon>
        </button>
      </div>
    </div>
    
    <!-- Section context indicator -->
    <div *ngIf="selectedSection && !isMinimized" class="section-context">
      <span class="context-label">Editing:</span>
      <span class="context-value">{{ selectedSection.title }}</span>
    </div>
  </div>
  
  <!-- Chat Content (hidden when minimized) -->
  <div *ngIf="!isMinimized" class="chat-content">
    <!-- Use the existing AI chat component -->
    <app-chat
      [chatType]="chatType"
      [fileName]="fileName"
      [name]="name"
      [description]="description"
      [baseContent]="baseContent"
      [chatHistory]="chatHistory"
      [supportsAddFromCode]="true"
      (getContent)="handleContentAddition($event)"
      (updateChatHistory)="updateChatHistory($event)"
      [containerClass]="'floating-chat-inner'"
    ></app-chat>
  </div>
</div>
